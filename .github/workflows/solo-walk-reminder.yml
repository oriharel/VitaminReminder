name: Solo Walk Reminder

on:
  schedule:
    # 13:30 UTC = 15:30 Israel Standard Time (UTC+2)
    # Note: Will be 16:30 during Summer Time (UTC+3)
    - cron: '30 13 * * *'
  workflow_dispatch: # Allow manual run from GitHub UI

jobs:
  trigger_reminder:
    runs-on: ubuntu-latest
    environment: Production
    steps:
      - name: Send Telegram reminder
        run: |
          MESSAGE=$(python3 -c "import urllib.parse; print(urllib.parse.quote('ğŸ• Time to walk Solo! ğŸ•'))")
          curl -X POST "https://vitamin-reminder.vercel.app/api/remind?message=${MESSAGE}"
      - name: Send WhatsApp reminder
        run: |
          curl -X POST "https://vitamin-reminder.vercel.app/api/whatsapp" \
            -H "Content-Type: application/json" \
            -d '{"message":"ğŸ• Time to walk Solo! ğŸ•"}'
